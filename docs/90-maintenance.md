# 90 — 维护手册（给维护这个仓库的智能体/人）

> 目标：让任何维护者都能把“新学到的技能/经验”稳定、低成本地沉淀到本仓库，并让分身能持续增量学习。

---

## 90.1 这份手册的维护原则

### 原则 A：入口稳定，内容模块化
- `README.md` 只做入口 + 阅读顺序 + 链接索引，不要堆长文。
- 具体内容写进 `docs/` 的模块文件；新增主题再新建模块。

### 原则 B：每次更新必须可增量学习
- 每次改动都要能回答：分身“只看哪里”能学到新增内容？
- 所以必须同步更新：
  1) 对应 `docs/*.md`
  2) `CHANGELOG.md`（新增 1~3 条）
  3) 如影响路由/索引：更新 `SUMMARY.md`

### 原则 C：宁可少而准，不要大全
- 只写“能复用的套路/约束/工具选择规则”。
- 避免把一次性上下文、隐私、token/PAT 等敏感信息写入公开仓库。

---

## 90.2 什么时候需要新增内容？（触发条件）

下面任一发生，就值得更新手册：
- 学会了一个新工具/skill（或一个旧工具的新用法）
- 形成了一套稳定的工作流（例如：网页证据获取、代码审计、cron 提醒文案）
- 出现过一次“踩坑”，并总结出可复用的规避规则
- 用户明确提出偏好/约束（例如：外部发送必须确认）

---

## 90.3 更新流程（标准操作）

### Step 1：判断属于哪个模块
优先映射到已有模块：
- 原则/边界/风格 → `docs/00-principles.md`
- 工作流/交付物定义 → `docs/01-workflow.md`
- 文件与本地执行（read/write/edit/exec/process）→ `docs/02-tools-core.md`
- 网页检索/抓取/浏览器自动化 → `docs/03-web.md`
- 外包/子代理（sessions_*）→ `docs/04-sessions-outsourcing.md`
- cron / message → `docs/05-scheduling-and-messaging.md`
- Feishu（doc/wiki/drive/bitable）→ `docs/06-feishu.md`
- token 统计/成本意识 → `docs/07-token-audit.md`

如果确实是新领域，再新增一个模块文件（例如 `docs/08-security.md`）。

### Step 2：用“可复用模板”写入
推荐每个新增条目按这个结构写，保证可读 + 可执行：
- **适用场景**：什么情况下用它
- **推荐工具/优先级**：用哪些 tools/skills，先后顺序
- **步骤**：可执行的步骤（最好能直接复制）
- **边界/风险**：什么时候不要用，或必须先确认
- **示例**：1 个最小示例

### Step 3：更新 SUMMARY（如果需要）
当新增内容会改变“任务路由”（分身面对任务该读哪里），就更新 `SUMMARY.md`。

### Step 4：更新 CHANGELOG（必须）
在 `CHANGELOG.md` 顶部增加当天条目（或在当天条目下追加），用 1~3 行说明新增了什么。

### Step 5：提交规范
- commit message 建议用 Conventional Commits：
  - `docs: ...` 文档更新
  - `feat: ...` 新增能力/脚本（如有）
  - `fix: ...` 修正错误说明

---

## 90.4 质量标准（合格/优秀）

### 合格
- 新增内容能被“另一个智能体”复用（不依赖你脑内上下文）
- 清楚写了边界与风险
- SUMMARY/CHANGELOG 同步

### 优秀
- 给出最小示例（copy/paste 即可）
- 给出“如何验证正确”的检查点
- 明确 tool 选择的理由（例如为什么 web_fetch 优先于 browser）

---

## 90.5 公开仓库的安全清单（必须遵守）
- **禁止**提交任何 token / PAT / cookie / credentials / 私人链接（带鉴权参数）
- **禁止**提交 `memory/`、`secrets/`、聊天记录 transcript
- 如果引用真实用户信息：必须脱敏（用占位符）

---

## 90.6 建议的演进路线（可选）
- 当模块增多：为 `docs/` 建一个 `docs/INDEX.md` 或把索引放入 `README.md`
- 当出现大量实例：新增 `examples/`，每个例子配“输入/输出/边界”
- 当需要机器检索更强：在每个模块顶部增加 `Tags:`（例如 `Tags: #web #evidence #browser`）
